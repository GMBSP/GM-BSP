<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Tower - Forums</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Verdana, Arial, Helvetica, sans-serif;
            background: #e5e5e5;
            color: #000;
            font-size: 11px;
        }

        .wrapper {
            max-width: 980px;
            margin: 20px auto;
            background: #fff;
            border: 1px solid #bbb;
        }

        /* Header */
        .forum-header {
            background: #2c5aa0;
            padding: 10px 15px;
            border-bottom: 3px solid #1a3d7a;
        }

        .forum-title {
            color: #fff;
            font-size: 20px;
            font-weight: bold;
        }

        .forum-subtitle {
            color: #b8d4ff;
            font-size: 10px;
            margin-top: 2px;
        }

        /* Navigation */
        .navbar {
            background: #3d6bb5;
            padding: 5px 15px;
            border-bottom: 1px solid #2c5aa0;
        }

        .navbar a {
            color: #fff;
            text-decoration: none;
            margin-right: 15px;
            font-size: 10px;
        }

        .navbar a:hover {
            text-decoration: underline;
        }

        /* Breadcrumb */
        .breadcrumb {
            background: #f0f0f0;
            padding: 6px 15px;
            border-bottom: 1px solid #ddd;
            font-size: 10px;
        }

        .breadcrumb a {
            color: #2c5aa0;
            text-decoration: none;
        }

        .breadcrumb a:hover {
            text-decoration: underline;
        }

        /* Category List */
        .category-list {
            border-top: 1px solid #ddd;
        }

        .category {
            border-bottom: 1px solid #ddd;
            display: grid;
            grid-template-columns: 50px 1fr 150px;
            padding: 12px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .category:hover {
            background: #f9f9f9;
        }

        .category-icon {
            text-align: center;
            font-size: 32px;
            font-family: Arial, sans-serif;
        }

        .category-info h3 {
            font-size: 13px;
            color: #2c5aa0;
            margin-bottom: 3px;
        }

        .category-desc {
            font-size: 10px;
            color: #666;
        }

        .category-stats {
            font-size: 10px;
            color: #666;
            text-align: right;
        }

        .stat-number {
            font-weight: bold;
            color: #2c5aa0;
        }

        /* Thread List */
        .thread-list {
            display: none;
        }

        .thread-list.active {
            display: block;
        }

        .thread-header {
            background: #e0e0e0;
            padding: 8px 12px;
            font-size: 10px;
            font-weight: bold;
            border-bottom: 1px solid #ccc;
            display: grid;
            grid-template-columns: 40px 1fr 100px 150px;
        }

        .thread {
            border-bottom: 1px solid #e5e5e5;
            padding: 10px 12px;
            cursor: pointer;
            display: grid;
            grid-template-columns: 40px 1fr 100px 150px;
            transition: background 0.2s;
        }

        .thread:hover {
            background: #f9f9f9;
        }

        .thread-icon {
            text-align: center;
            font-size: 20px;
        }

        .thread-title {
            font-size: 12px;
            color: #2c5aa0;
            font-weight: bold;
            margin-bottom: 3px;
        }

        .thread-author {
            font-size: 10px;
            color: #666;
        }

        .thread-replies {
            text-align: center;
            font-size: 11px;
        }

        .thread-lastpost {
            font-size: 10px;
            color: #666;
        }

        /* Thread View */
        .thread-view {
            display: none;
            padding: 15px;
        }

        .thread-view.active {
            display: block;
        }

        .back-btn {
            display: inline-block;
            padding: 5px 10px;
            background: #e0e0e0;
            border: 1px solid #ccc;
            color: #000;
            text-decoration: none;
            font-size: 10px;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .back-btn:hover {
            background: #d0d0d0;
        }

        .post {
            border: 1px solid #ccc;
            margin-bottom: 10px;
            background: #fff;
        }

        .post-header {
            background: #e8e8e8;
            padding: 6px 10px;
            border-bottom: 1px solid #ccc;
            font-size: 10px;
        }

        .post-author {
            font-weight: bold;
            color: #2c5aa0;
        }

        .post-date {
            color: #666;
            float: right;
        }

        .post-body {
            padding: 12px;
            font-size: 11px;
            line-height: 1.5;
            white-space: pre-wrap;
        }

        /* Footer */
        .forum-footer {
            background: #3d6bb5;
            padding: 10px 15px;
            border-top: 3px solid #2c5aa0;
            text-align: center;
            color: #fff;
            font-size: 10px;
        }

        .forum-footer a {
            color: #b8d4ff;
            text-decoration: none;
            margin: 0 8px;
        }

        .no-threads {
            padding: 30px;
            text-align: center;
            color: #999;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="forum-header">
            <div class="forum-title">THE TOWER FORUMS</div>
            <div class="forum-subtitle">Community Discussion</div>
        </div>

        <div class="navbar">
            <a href="index">GM Tower Home</a>
            <a href="tf2tower">TF2 Tower Home</a>
            <a href="forums">Forums</a>
            <a href="https://discord.gg/udE8zN5Gx7">Discord</a>
        </div>

        <div class="breadcrumb">
            <span id="breadcrumb">
                <a href="index">Home</a> &gt; Forums
            </span>
        </div>

        <!-- Category List -->
        <div id="categoryList" class="category-list">
            <div class="category" onclick="openCategory('general')">
                <div class="category-icon">üí≠</div>
                <div class="category-info">
                    <h3>General Discussion</h3>
                    <div class="category-desc">Talk about anything Tower related</div>
                </div>
                <div class="category-stats">
                    <div><span class="stat-number" id="general-threads">0</span> Threads</div>
                    <div><span class="stat-number" id="general-posts">0</span> Posts</div>
                </div>
            </div>

            <div class="category" onclick="openCategory('announcements')">
                <div class="category-icon">!</div>
                <div class="category-info">
                    <h3>Announcements</h3>
                    <div class="category-desc">Official server announcements and updates</div>
                </div>
                <div class="category-stats">
                    <div><span class="stat-number" id="announcements-threads">0</span> Threads</div>
                    <div><span class="stat-number" id="announcements-posts">0</span> Posts</div>
                </div>
            </div>

            <div class="category" onclick="openCategory('gameservers')">
                <div class="category-icon">¬ª</div>
                <div class="category-info">
                    <h3>Game Servers</h3>
                    <div class="category-desc">GM Tower and TF2 Tower discussion</div>
                </div>
                <div class="category-stats">
                    <div><span class="stat-number" id="gameservers-threads">0</span> Threads</div>
                    <div><span class="stat-number" id="gameservers-posts">0</span> Posts</div>
                </div>
            </div>

            <div class="category" onclick="openCategory('support')">
                <div class="category-icon">?</div>
                <div class="category-info">
                    <h3>Help & Support</h3>
                    <div class="category-desc">Get help with server issues</div>
                </div>
                <div class="category-stats">
                    <div><span class="stat-number" id="support-threads">0</span> Threads</div>
                    <div><span class="stat-number" id="support-posts">0</span> Posts</div>
                </div>
            </div>
        </div>

        <!-- Thread List -->
        <div id="threadList" class="thread-list">
            <div style="padding: 10px; background: #f0f0f0; border-bottom: 1px solid #ccc;">
                <span class="back-btn" onclick="backToCategories()">‚Üê Back to Forum Categories</span>
            </div>
            <div class="thread-header">
                <div></div>
                <div>Thread</div>
                <div>Replies</div>
                <div>Last Post</div>
            </div>
            <div id="threadListContainer"></div>
        </div>

        <!-- Thread View -->
        <div id="threadView" class="thread-view">
            <span class="back-btn" onclick="backToThreads()">‚Üê Back to Threads</span>
            <div id="threadContent"></div>
        </div>

        <div class="forum-footer">
            <a href="index">GM Tower</a> |
            <a href="tf2tower">TF2 Tower</a> |
            <a href="https://discord.gg/udE8zN5Gx7">Discord</a>
            <div style="margin-top: 5px;">&copy; 2012 The Tower Community</div>
        </div>
    </div>

    <script>
        let currentCategory = null;
        let currentThread = null;

        // Initialize with default threads
        function initDefaults() {
            if (!localStorage.getItem('forum_threads')) {
                const defaultThreads = [
                    {
                        id: 1,
                        category: 'general',
                        title: 'The Weird Door in Construct',
                        author: 'mysterious_steve',
                        date: new Date('2015-12-15').getTime(),
                        replies: 47,
                        content: "Has anyone else noticed the mysterious door that appeared in construct? It doesn't open and makes strange sounds when you get close. Some players are saying it's part of an ARG. What do you think?"
                    },
                    {
                        id: 2,
                        category: 'announcements',
                        title: 'Welcome to The Tower!',
                        author: 'AdminJake',
                        date: new Date('2015-11-20').getTime(),
                        replies: 23,
                        content: "Welcome to The Tower community!\n\nWe're glad to have you here. Please read the rules and have fun!\n\n- The Admin Team"
                    },
                    {
                        id: 3,
                        category: 'gameservers',
                        title: 'Sandbox Build Competition This Weekend!',
                        author: 'ModSarah',
                        date: new Date('2016-01-10').getTime(),
                        replies: 18,
                        content: "Build Competition Alert!\n\nThis Saturday at 3 PM EST, we're hosting our monthly build competition!\n\nTheme: 'Futuristic City'\nPrizes: Custom player models and VIP status\nTime limit: 2 hours\n\nSign up in Discord!"
                    },
                    {
                        id: 4,
                        category: 'gameservers',
                        title: 'New TTT Maps Added',
                        author: 'AdminJake',
                        date: new Date('2016-01-18').getTime(),
                        replies: 12,
                        content: "We've added 3 new TTT maps to the rotation:\n\n- ttt_minecraft_b5\n- ttt_clue_se\n- ttt_rooftops_a2_1\n\nCheck them out and let us know what you think!"
                    },
                    {
                        id: 5,
                        category: 'support',
                        title: 'How do I connect to the server?',
                        author: 'newbie123',
                        date: new Date('2016-01-05').getTime(),
                        replies: 5,
                        content: "Hey guys, I'm new to GMod. How do I connect to The GM Tower server?\n\nThanks!"
                    },
                    {
                        id: 6,
                        category: 'general',
                        title: 'Best moments from last night',
                        author: 'ProGamer2015',
                        date: new Date('2016-01-22').getTime(),
                        replies: 31,
                        content: "Last night on TTT was INSANE! That round where everyone was accusing Jake of being the traitor but it turned out to be Sarah all along... epic!\n\nWhat were your favorite moments?"
                    }
                ];
                localStorage.setItem('forum_threads', JSON.stringify(defaultThreads));
            }
        }

        function formatDate(timestamp) {
            const date = new Date(timestamp);
            const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
            return months[date.getMonth()] + ' ' + date.getDate() + ', ' + date.getFullYear();
        }

        function updateStats() {
            const threads = JSON.parse(localStorage.getItem('forum_threads') || '[]');
            
            const categories = ['general', 'announcements', 'gameservers', 'support'];
            categories.forEach(cat => {
                const catThreads = threads.filter(t => t.category === cat);
                const threadCount = catThreads.length;
                const postCount = catThreads.reduce((sum, t) => sum + (t.replies || 0), 0) + threadCount;
                
                document.getElementById(cat + '-threads').textContent = threadCount;
                document.getElementById(cat + '-posts').textContent = postCount;
            });
        }

        function openCategory(category) {
            currentCategory = category;
            const threads = JSON.parse(localStorage.getItem('forum_threads') || '[]');
            const catThreads = threads.filter(t => t.category === category);

            document.getElementById('categoryList').style.display = 'none';
            document.getElementById('threadList').classList.add('active');

            const categoryNames = {
                general: 'General Discussion',
                announcements: 'Announcements',
                gameservers: 'Game Servers',
                support: 'Help & Support'
            };

            document.getElementById('breadcrumb').innerHTML = 
                '<a href="#" onclick="backToCategories(); return false;">Forums</a> &gt; ' + categoryNames[category];

            if (catThreads.length === 0) {
                document.getElementById('threadListContainer').innerHTML = 
                    '<div class="no-threads">No threads in this category yet.</div>';
                return;
            }

            catThreads.sort((a, b) => b.date - a.date);

            let html = '';
            catThreads.forEach(thread => {
                const icon = thread.category === 'announcements' ? '‚ñ∫' : '‚Ä¢';
                html += `
                    <div class="thread" onclick="openThread(${thread.id})">
                        <div class="thread-icon">${icon}</div>
                        <div>
                            <div class="thread-title">${thread.title}</div>
                            <div class="thread-author">by ${thread.author}</div>
                        </div>
                        <div class="thread-replies">${thread.replies || 0}</div>
                        <div class="thread-lastpost">
                            ${formatDate(thread.date)}<br>
                            by ${thread.author}
                        </div>
                    </div>
                `;
            });

            document.getElementById('threadListContainer').innerHTML = html;
        }

        function openThread(id) {
            const threads = JSON.parse(localStorage.getItem('forum_threads') || '[]');
            const thread = threads.find(t => t.id === id);
            
            if (!thread) return;

            currentThread = thread;

            document.getElementById('threadList').classList.remove('active');
            document.getElementById('threadView').classList.add('active');

            const categoryNames = {
                general: 'General Discussion',
                announcements: 'Announcements',
                gameservers: 'Game Servers',
                support: 'Help & Support'
            };

            document.getElementById('breadcrumb').innerHTML = 
                '<a href="#" onclick="backToCategories(); return false;">Forums</a> &gt; ' +
                '<a href="#" onclick="backToThreads(); return false;">' + categoryNames[thread.category] + '</a> &gt; ' +
                thread.title;

            document.getElementById('threadContent').innerHTML = `
                <h2 style="color: #2c5aa0; margin-bottom: 15px; font-size: 16px;">${thread.title}</h2>
                <div class="post">
                    <div class="post-header">
                        <span class="post-author">${thread.author}</span>
                        <span class="post-date">${formatDate(thread.date)}</span>
                    </div>
                    <div class="post-body">${thread.content}</div>
                </div>
            `;
        }

        function backToCategories() {
            document.getElementById('threadList').classList.remove('active');
            document.getElementById('threadView').classList.remove('active');
            document.getElementById('categoryList').style.display = 'block';
            document.getElementById('breadcrumb').innerHTML = '<a href="index">Home</a> &gt; Forums';
            currentCategory = null;
            currentThread = null;
        }

        function backToThreads() {
            document.getElementById('threadView').classList.remove('active');
            document.getElementById('threadList').classList.add('active');
            openCategory(currentCategory);
        }

        initDefaults();
        updateStats();
    </script>
</body>
</html>
